<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Romgon AI Training Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: #888;
            font-size: 0.9em;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-card .change {
            font-size: 0.9em;
            color: #22c55e;
        }

        .stat-card .change.negative {
            color: #ef4444;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .panel h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .control-section {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #eee;
        }

        .control-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .control-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: #22c55e;
            color: white;
        }

        .btn-success:hover {
            background: #16a34a;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #666;
            font-weight: 600;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1em;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .progress-container {
            margin-top: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e5e7eb;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .progress-text {
            color: #666;
            font-size: 0.9em;
        }

        .log-container {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
            border-left: 3px solid transparent;
        }

        .log-entry.info {
            border-left-color: #3b82f6;
        }

        .log-entry.success {
            border-left-color: #22c55e;
        }

        .log-entry.warning {
            border-left-color: #f59e0b;
        }

        .log-entry.error {
            border-left-color: #ef4444;
        }

        .model-list {
            display: grid;
            gap: 10px;
            margin-top: 15px;
        }

        .model-item {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .model-item.active {
            background: #e0e7ff;
            border: 2px solid #667eea;
        }

        .model-info {
            flex: 1;
        }

        .model-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .model-meta {
            font-size: 0.85em;
            color: #666;
        }

        .model-actions {
            display: flex;
            gap: 5px;
        }

        .model-actions button {
            padding: 6px 12px;
            font-size: 0.85em;
        }

        .chart-container {
            margin-top: 20px;
            height: 300px;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-indicator.online {
            background: #22c55e;
            animation: pulse 2s infinite;
        }

        .status-indicator.offline {
            background: #ef4444;
        }

        .status-indicator.training {
            background: #f59e0b;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .alert.info {
            background: #dbeafe;
            color: #1e40af;
            border-left: 4px solid #3b82f6;
        }

        .alert.warning {
            background: #fef3c7;
            color: #92400e;
            border-left: 4px solid #f59e0b;
        }

        .alert.success {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid #22c55e;
        }

        @media (max-width: 968px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- Header -->
        <div class="header">
            <h1>ü§ñ Romgon AI Training Dashboard</h1>
            <p>Train and manage your neural network AI models</p>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Training Games</h3>
                <div class="value" id="stat-games">0</div>
                <div class="change" id="stat-games-change">+0 this week</div>
            </div>
            <div class="stat-card">
                <h3>Active Models</h3>
                <div class="value" id="stat-models">0</div>
                <div class="change" id="stat-models-change">1 in use</div>
            </div>
            <div class="stat-card">
                <h3>Training Accuracy</h3>
                <div class="value" id="stat-accuracy">0%</div>
                <div class="change" id="stat-accuracy-change">+0% improvement</div>
            </div>
            <div class="stat-card">
                <h3>AI Win Rate</h3>
                <div class="value" id="stat-winrate">0%</div>
                <div class="change" id="stat-winrate-change">vs humans</div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Training Panel -->
            <div class="panel">
                <h2>Training Control Panel</h2>

                <!-- Data Collection Section -->
                <div class="control-section">
                    <h3>üì• Step 1: Load Training Data</h3>
                    <div class="input-group">
                        <label for="data-limit">Number of Games to Load:</label>
                        <input type="number" id="data-limit" value="1000" min="100" max="10000" step="100">
                    </div>
                    <div class="input-group">
                        <label for="min-rating">Minimum Player Rating:</label>
                        <input type="number" id="min-rating" value="1200" min="800" max="2500" step="100">
                    </div>
                    <div class="button-group">
                        <button class="btn-primary" onclick="loadTrainingData()">
                            üì• Load Data
                        </button>
                        <button class="btn-secondary" onclick="viewDataSample()">
                            üëÅÔ∏è Preview Data
                        </button>
                    </div>
                    <p class="progress-text" id="data-status">Not loaded</p>
                </div>

                <!-- Model Building Section -->
                <div class="control-section">
                    <h3>üèóÔ∏è Step 2: Build Neural Network</h3>
                    <div class="input-group">
                        <label for="model-architecture">Model Architecture:</label>
                        <select id="model-architecture">
                            <option value="small">Small (Fast, 128 units)</option>
                            <option value="medium" selected>Medium (Balanced, 256 units)</option>
                            <option value="large">Large (Powerful, 512 units)</option>
                        </select>
                    </div>
                    <div class="button-group">
                        <button class="btn-primary" onclick="buildModel()">
                            üèóÔ∏è Create Model
                        </button>
                        <button class="btn-secondary" onclick="viewModelArchitecture()">
                            üìä View Architecture
                        </button>
                    </div>
                    <p class="progress-text" id="model-status">Not built</p>
                </div>

                <!-- Training Section -->
                <div class="control-section">
                    <h3>üéØ Step 3: Train Model</h3>
                    <div class="input-group">
                        <label for="training-epochs">Training Epochs:</label>
                        <input type="number" id="training-epochs" value="50" min="10" max="200" step="10">
                    </div>
                    <div class="input-group">
                        <label for="batch-size">Batch Size:</label>
                        <input type="number" id="batch-size" value="32" min="16" max="128" step="16">
                    </div>
                    <div class="button-group">
                        <button class="btn-success" id="train-btn" onclick="startTraining()">
                            üéØ Start Training
                        </button>
                        <button class="btn-danger" id="stop-btn" onclick="stopTraining()" disabled>
                            ‚èπÔ∏è Stop Training
                        </button>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill" style="width: 0%">
                                <span id="progress-percent">0%</span>
                            </div>
                        </div>
                        <p class="progress-text" id="training-stats">Waiting to start...</p>
                    </div>
                </div>

                <!-- Save & Deploy Section -->
                <div class="control-section">
                    <h3>üíæ Step 4: Save & Deploy</h3>
                    <div class="input-group">
                        <label for="model-name">Model Name:</label>
                        <input type="text" id="model-name" placeholder="romgon-ai-v1" value="romgon-ai-v1">
                    </div>
                    <div class="button-group">
                        <button class="btn-success" onclick="saveModel()">
                            üíæ Save to Browser
                        </button>
                        <button class="btn-primary" onclick="deployModel()">
                            üöÄ Deploy as Active
                        </button>
                        <button class="btn-secondary" onclick="exportModel()">
                            üì§ Export Model
                        </button>
                    </div>
                </div>

                <!-- Training Chart -->
                <div class="chart-container">
                    <canvas id="training-chart"></canvas>
                </div>
            </div>

            <!-- Side Panel -->
            <div class="panel">
                <h2>System Status</h2>

                <!-- Status Indicators -->
                <div style="margin-bottom: 20px;">
                    <div style="margin-bottom: 10px;">
                        <span class="status-indicator online"></span>
                        <strong>Backend:</strong> <span id="backend-status">Connected</span>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <span class="status-indicator" id="tf-status-indicator"></span>
                        <strong>TensorFlow.js:</strong> <span id="tf-status">Loading...</span>
                    </div>
                    <div>
                        <span class="status-indicator" id="training-status-indicator"></span>
                        <strong>Training:</strong> <span id="training-status">Idle</span>
                    </div>
                </div>

                <!-- Saved Models -->
                <h3 style="margin-top: 30px; margin-bottom: 15px;">Saved Models</h3>
                <div class="model-list" id="models-list">
                    <p style="color: #666;">No models saved yet</p>
                </div>

                <!-- Quick Actions -->
                <h3 style="margin-top: 30px; margin-bottom: 15px;">Quick Actions</h3>
                <div class="button-group" style="flex-direction: column;">
                    <button class="btn-primary" onclick="testAIModel()">
                        üéÆ Test AI in Game
                    </button>
                    <button class="btn-secondary" onclick="compareModels()">
                        ‚öñÔ∏è Compare Models
                    </button>
                    <button class="btn-secondary" onclick="viewTrainingHistory()">
                        üìà Training History
                    </button>
                    <button class="btn-danger" onclick="clearAllModels()">
                        üóëÔ∏è Clear All Models
                    </button>
                </div>

                <!-- Activity Log -->
                <h3 style="margin-top: 30px; margin-bottom: 15px;">Activity Log</h3>
                <div class="log-container" id="activity-log">
                    <div class="log-entry info">Dashboard initialized</div>
                </div>
            </div>
        </div>
    </div>

    <script src="ai-training-engine.js"></script>
    <script>
        // Dashboard Controller
        const BACKEND_URL = 'https://api.romgon.net';
        
        let trainingChart = null;
        let aiTrainer = null;
        let trainingInProgress = false;

        // Initialize
        window.addEventListener('DOMContentLoaded', async () => {
            log('Dashboard initialized', 'info');
            
            // Initialize AI Trainer
            aiTrainer = new RomgonAITrainer();
            log('AI Trainer initialized', 'success');
            
            await checkTensorFlowStatus();
            await loadSavedModels();
            await updateStats();
            initializeChart();
        });

        // Check TensorFlow.js status
        async function checkTensorFlowStatus() {
            try {
                await tf.ready();
                const backend = tf.getBackend();
                document.getElementById('tf-status').textContent = `Ready (${backend})`;
                document.getElementById('tf-status-indicator').classList.add('online');
                log(`TensorFlow.js ready on ${backend} backend`, 'success');
            } catch (error) {
                document.getElementById('tf-status').textContent = 'Error';
                document.getElementById('tf-status-indicator').classList.add('offline');
                log(`TensorFlow.js error: ${error.message}`, 'error');
            }
        }

        // Load training data
        async function loadTrainingData() {
            const limit = document.getElementById('data-limit').value;
            const minRating = document.getElementById('min-rating').value;

            log(`Loading ${limit} games (min rating: ${minRating})...`, 'info');
            document.getElementById('data-status').textContent = 'Loading...';

            try {
                const count = await aiTrainer.loadTrainingData(parseInt(limit), parseInt(minRating));
                
                document.getElementById('data-status').textContent = `‚úÖ Loaded ${count} training examples`;
                document.getElementById('stat-games').textContent = count;
                log(`Successfully loaded ${count} training examples`, 'success');
            } catch (error) {
                document.getElementById('data-status').textContent = '‚ùå Failed to load';
                log(`Failed to load training data: ${error.message}`, 'error');
            }
        }

        // Build model
        async function buildModel() {
            const architecture = document.getElementById('model-architecture').value;
            log(`Building ${architecture} model...`, 'info');
            document.getElementById('model-status').textContent = 'Building...';

            try {
                aiTrainer.buildModel(architecture);
                
                const arch = aiTrainer.getModelArchitecture();
                document.getElementById('model-status').textContent = `‚úÖ Model built (${arch.parameters.toLocaleString()} parameters)`;
                log(`Model architecture created: ${arch.layers} layers, ${arch.parameters.toLocaleString()} parameters`, 'success');
            } catch (error) {
                document.getElementById('model-status').textContent = '‚ùå Failed';
                log(`Failed to build model: ${error.message}`, 'error');
            }
        }

        // Start training
        async function startTraining() {
            if (!aiTrainer.trainingData || aiTrainer.trainingData.length === 0) {
                alert('Please load training data first!');
                return;
            }

            if (!aiTrainer.model) {
                alert('Please build the model first!');
                return;
            }

            trainingInProgress = true;
            document.getElementById('train-btn').disabled = true;
            document.getElementById('stop-btn').disabled = false;
            document.getElementById('training-status').textContent = 'Training';
            document.getElementById('training-status-indicator').classList.add('training');

            const epochs = parseInt(document.getElementById('training-epochs').value);
            const batchSize = parseInt(document.getElementById('batch-size').value);
            
            log(`Starting training: ${epochs} epochs, batch size ${batchSize}`, 'info');

            try {
                await aiTrainer.train(epochs, batchSize, {
                    onEpochEnd: async (epoch, logs) => {
                        const progress = ((epoch + 1) / epochs) * 100;
                        updateProgress(progress);
                        updateTrainingStats(epoch + 1, epochs, logs.loss, logs.acc);
                        updateChart(epoch + 1, logs.loss, logs.acc);
                    }
                });

                if (trainingInProgress) {
                    log('Training completed successfully!', 'success');
                    document.getElementById('training-status').textContent = 'Complete';
                    document.getElementById('training-status-indicator').classList.remove('training');
                    document.getElementById('training-status-indicator').classList.add('online');
                } else {
                    log('Training stopped by user', 'warning');
                    document.getElementById('training-status').textContent = 'Stopped';
                }
            } catch (error) {
                log(`Training error: ${error.message}`, 'error');
                document.getElementById('training-status').textContent = 'Error';
                document.getElementById('training-status-indicator').classList.remove('training');
                document.getElementById('training-status-indicator').classList.add('offline');
            }

            trainingInProgress = false;
            document.getElementById('train-btn').disabled = false;
            document.getElementById('stop-btn').disabled = true;
        }

        // Stop training
        function stopTraining() {
            trainingInProgress = false;
            aiTrainer.stopTraining();
            log('Stopping training...', 'warning');
        }

        // Update progress bar
        function updateProgress(percent) {
            document.getElementById('progress-fill').style.width = `${percent}%`;
            document.getElementById('progress-percent').textContent = `${Math.round(percent)}%`;
        }

        // Update training stats
        function updateTrainingStats(epoch, totalEpochs, loss, accuracy) {
            document.getElementById('training-stats').innerHTML = `
                Epoch ${epoch}/${totalEpochs} | 
                Loss: ${loss.toFixed(4)} | 
                Accuracy: ${(accuracy * 100).toFixed(2)}%
            `;
            document.getElementById('stat-accuracy').textContent = `${(accuracy * 100).toFixed(1)}%`;
        }

        // Initialize chart
        function initializeChart() {
            const ctx = document.getElementById('training-chart').getContext('2d');
            trainingChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Loss',
                        data: [],
                        borderColor: '#ef4444',
                        tension: 0.4,
                        yAxisID: 'y'
                    }, {
                        label: 'Accuracy',
                        data: [],
                        borderColor: '#22c55e',
                        tension: 0.4,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: { display: true, text: 'Loss' }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: { display: true, text: 'Accuracy' },
                            grid: { drawOnChartArea: false }
                        }
                    }
                }
            });
        }

        // Update chart
        function updateChart(epoch, loss, accuracy) {
            trainingChart.data.labels.push(epoch);
            trainingChart.data.datasets[0].data.push(loss);
            trainingChart.data.datasets[1].data.push(accuracy);
            trainingChart.update('none');
        }

        // Save model
        async function saveModel() {
            if (!aiTrainer.model) {
                alert('No model to save! Please build and train a model first.');
                return;
            }

            const modelName = document.getElementById('model-name').value || 'romgon-ai-v1';
            log(`Saving model as ${modelName}...`, 'info');
            
            try {
                await aiTrainer.saveModel(modelName);
                await addModelToList(modelName);
                log(`Model saved: ${modelName}`, 'success');
            } catch (error) {
                log(`Failed to save model: ${error.message}`, 'error');
            }
        }

        // Load saved models
        async function loadSavedModels() {
            try {
                const models = await RomgonAITrainer.listSavedModels();
                const modelsList = document.getElementById('models-list');
                
                if (models.length === 0) {
                    modelsList.innerHTML = '<p style="color: #666;">No models saved yet</p>';
                    return;
                }

                modelsList.innerHTML = '';
                models.forEach(metadata => {
                    const modelItem = document.createElement('div');
                    modelItem.className = 'model-item';
                    modelItem.innerHTML = `
                        <div class="model-info">
                            <div class="model-name">${metadata.name}</div>
                            <div class="model-meta">
                                ${new Date(metadata.timestamp).toLocaleDateString()} ‚Ä¢ 
                                ${metadata.trainingExamples.toLocaleString()} examples ‚Ä¢ 
                                ${metadata.architecture.parameters.toLocaleString()} params
                            </div>
                        </div>
                        <div class="model-actions">
                            <button class="btn-primary" onclick="loadModelForUse('${metadata.name}')">Load</button>
                            <button class="btn-danger" onclick="deleteModel('${metadata.name}')">Delete</button>
                        </div>
                    `;
                    modelsList.appendChild(modelItem);
                });

                document.getElementById('stat-models').textContent = models.length;
                log(`Found ${models.length} saved models`, 'info');
            } catch (error) {
                log(`Failed to load models list: ${error.message}`, 'error');
            }
        }

        // Add model to list
        async function addModelToList(name) {
            const modelsList = document.getElementById('models-list');
            const firstChild = modelsList.firstChild;
            
            if (firstChild && firstChild.tagName !== 'DIV') {
                modelsList.innerHTML = '';
            }

            const modelItem = document.createElement('div');
            modelItem.className = 'model-item';
            modelItem.innerHTML = `
                <div class="model-info">
                    <div class="model-name">${name}</div>
                    <div class="model-meta">Saved ${new Date().toLocaleString()}</div>
                </div>
                <div class="model-actions">
                    <button class="btn-primary" onclick="loadModelForUse('${name}')">Load</button>
                    <button class="btn-danger" onclick="deleteModel('${name}')">Delete</button>
                </div>
            `;
            modelsList.insertBefore(modelItem, modelsList.firstChild);

            const count = modelsList.querySelectorAll('.model-item').length;
            document.getElementById('stat-models').textContent = count;
        }

        // Update stats
        async function updateStats() {
            // In real implementation, fetch from backend
            document.getElementById('stat-games-change').textContent = '+127 this week';
            document.getElementById('stat-models-change').textContent = '1 in use';
            document.getElementById('stat-accuracy-change').textContent = '+12% improvement';
            document.getElementById('stat-winrate-change').textContent = 'vs humans';
        }

        // Log activity
        function log(message, type = 'info') {
            const logContainer = document.getElementById('activity-log');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.insertBefore(entry, logContainer.firstChild);

            // Keep only last 50 entries
            while (logContainer.children.length > 50) {
                logContainer.removeChild(logContainer.lastChild);
            }

            // Auto-scroll
            logContainer.scrollTop = 0;
        }

        // Stub functions
        function viewDataSample() { alert('Data preview coming soon'); }
        function viewModelArchitecture() { 
            if (aiTrainer.model) {
                const arch = aiTrainer.getModelArchitecture();
                alert(`Model Architecture:\n\nLayers: ${arch.layers}\nParameters: ${arch.parameters.toLocaleString()}\nInput Shape: ${arch.inputShape}\nOutput Shape: ${arch.outputShape}`);
            } else {
                alert('No model built yet');
            }
        }
        async function deployModel() { 
            const modelName = document.getElementById('model-name').value || 'romgon-ai-v1';
            localStorage.setItem('active-ai-model', modelName);
            log(`Model deployed as active AI: ${modelName}`, 'success'); 
        }
        async function exportModel() { 
            if (!aiTrainer.model) {
                alert('No model to export');
                return;
            }
            try {
                await aiTrainer.exportModel();
                log('Model exported to downloads', 'success');
            } catch (error) {
                log(`Export failed: ${error.message}`, 'error');
            }
        }
        function testAIModel() { window.location.href = '/'; }
        function compareModels() { alert('Model comparison coming soon'); }
        function viewTrainingHistory() { alert('Training history coming soon'); }
        async function clearAllModels() { 
            if(confirm('Delete all models?')) {
                const models = await RomgonAITrainer.listSavedModels();
                for (const model of models) {
                    await RomgonAITrainer.deleteModel(model.name);
                }
                await loadSavedModels();
                log('All models cleared', 'warning'); 
            }
        }
        async function loadModelForUse(name) { 
            log(`Loading model: ${name}`, 'info');
            try {
                await aiTrainer.loadModel(name);
                document.getElementById('model-status').textContent = `‚úÖ Loaded: ${name}`;
                log(`Model loaded successfully: ${name}`, 'success');
            } catch (error) {
                log(`Failed to load model: ${error.message}`, 'error');
            }
        }
        async function deleteModel(name) { 
            if(confirm(`Delete ${name}?`)) {
                try {
                    await RomgonAITrainer.deleteModel(name);
                    await loadSavedModels();
                    log(`Model deleted: ${name}`, 'warning');
                } catch (error) {
                    log(`Failed to delete: ${error.message}`, 'error');
                }
            }
        }
    </script>
</body>
</html>
